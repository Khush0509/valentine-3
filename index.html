<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Our Valentine Story ‚ù§Ô∏è</title>

<style>

body{
margin:0;
font-family:'Segoe UI',sans-serif;
overflow:hidden;
background:black;
}

/* ---------- PAGE ---------- */

.page{
position:absolute;
width:100%;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
transition:1.1s ease;
}

.hidden{
opacity:0;
pointer-events:none;
transform:scale(1.1);
filter:blur(6px);
}

/* ---------- BACKGROUNDS ---------- */

.bg0{background:url("https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2") center/cover;}
.bg1{background:url("https://images.unsplash.com/photo-1518199266791-5375a83190b7") center/cover;}
.bg2{background:url("hug.jpg") center/cover;}
.bg3{background:url("pic2.jpg") center/cover;}

/* ---------- GLASS ---------- */

.glass{
background:rgba(255,255,255,0.15);
backdrop-filter:blur(18px);
padding:25px;
border-radius:25px;
color:white;
text-align:center;
width:90%;
max-width:420px;
box-shadow:0 0 40px rgba(0,0,0,0.4);
}

/* ---------- ENTRY HEART ---------- */

.heart{
font-size:80px;
cursor:pointer;
animation:pulse 1.6s infinite;
}

@keyframes pulse{
0%{transform:scale(1);}
50%{transform:scale(1.2);}
100%{transform:scale(1);}
}

/* ---------- PUZZLE ---------- */

.puzzleBoard{
display:grid;
grid-template-columns:repeat(2,130px);
gap:10px;
margin-bottom:20px;
}

.slot{
width:130px;
height:130px;
border:2px dashed white;
border-radius:15px;
}

.pieces{
display:flex;
flex-wrap:wrap;
gap:10px;
justify-content:center;
}

.piece{
width:130px;
height:130px;
border-radius:15px;
background-image:url("pic1.jpg");
background-size:260px 260px;
cursor:grab;
}

/* ---------- HUG ---------- */

.hugContainer{
position:relative;
width:90%;
max-width:350px;
}

.hugContainer img{
width:100%;
border-radius:25px;
transition:transform 1.5s ease;
}

.finger{
position:absolute;
width:90px;
height:90px;
border-radius:50%;
border:3px dashed white;
animation:pulse 2s infinite;
}

.finger.left{left:10%; top:65%;}
.finger.right{right:10%; top:65%;}

.glow{
box-shadow:0 0 35px pink;
}

/* ---------- ROSES ---------- */

.rose{
position:absolute;
font-size:24px;
animation:floatUp 6s linear infinite;
}

@keyframes floatUp{
0%{transform:translateY(100vh);}
100%{transform:translateY(-120vh);}
}

/* ---------- FINAL TEXT ---------- */

.finalText{
max-height:60vh;
overflow-y:auto;
text-align:left;
line-height:1.7;
}

</style>
</head>

<body>

<!-- ‚ù§Ô∏è PAGE 0 ENTRY -->

<div id="page0" class="page bg0">

<div class="glass">
<h2>Hold Heart To Enter ‚ù§Ô∏è</h2>
<div class="heart" id="heart">‚ù§Ô∏è</div>
</div>

</div>

<!-- ‚ù§Ô∏è PAGE 1 PUZZLE -->

<div id="page1" class="page bg1 hidden">

<div class="glass">
<h2>Complete Our Memory ‚ù§Ô∏è</h2>

<div class="puzzleBoard">
<div class="slot" data-pos="0"></div>
<div class="slot" data-pos="1"></div>
<div class="slot" data-pos="2"></div>
<div class="slot" data-pos="3"></div>
</div>

<div class="pieces" id="pieces"></div>

</div>

</div>

<!-- ‚ù§Ô∏è PAGE 2 HUG -->

<div id="page2" class="page bg2 hidden">

<div class="glass">
<h2>Hold Me ü§ç</h2>

<div class="hugContainer">
<img id="hugImg" src="hug.jpg">
<div class="finger left" id="f1"></div>
<div class="finger right" id="f2"></div>
</div>

</div>

</div>

<!-- ‚ù§Ô∏è PAGE 3 FINAL -->

<div id="page3" class="page bg3 hidden">

<div class="glass finalText">
<h2>For You ‚ù§Ô∏è</h2>
<p>
Goooooodmorningsss ‚ù§Ô∏è ... (your full text here)
</p>
</div>

</div>

<audio id="music" src="mus1.mp3" loop></audio>

<script>

/* ---------- PAGE SWITCH ---------- */

function showPage(a,b){
document.getElementById(a).classList.add("hidden")
document.getElementById(b).classList.remove("hidden")
}

/* ---------- HEART ENTRY ---------- */

const music=document.getElementById("music")

function startExperience(){

music.volume=0
music.play().catch(()=>{})

/* Smooth music fade */
let v=0
let fade=setInterval(()=>{
v+=0.05
music.volume=v
if(v>=1) clearInterval(fade)
},200)

showPage("page0","page1")
}

document.getElementById("heart").addEventListener("touchstart",startExperience)
document.getElementById("heart").addEventListener("mousedown",startExperience)

/* ---------- PUZZLE ---------- */

const piecesContainer=document.getElementById("pieces")
const slots=document.querySelectorAll(".slot")

let order=[0,1,2,3].sort(()=>Math.random()-0.5)

order.forEach(num=>{
let piece=document.createElement("div")
piece.className="piece"
piece.draggable=true
piece.dataset.correct=num
piece.style.backgroundPosition=`${-(num%2)*130}px ${-Math.floor(num/2)*130}px`

piece.addEventListener("dragstart",e=>{
e.dataTransfer.setData("text",num)
})

piecesContainer.appendChild(piece)
})

slots.forEach(slot=>{

slot.addEventListener("dragover",e=>e.preventDefault())

slot.addEventListener("drop",e=>{
let data=e.dataTransfer.getData("text")
let piece=[...piecesContainer.children].find(p=>p.dataset.correct==data)

if(slot.children.length===0){
slot.appendChild(piece)
checkPuzzle()
}
})
})

function checkPuzzle(){

let correct=true

slots.forEach(slot=>{
let piece=slot.children[0]
if(!piece || piece.dataset.correct!==slot.dataset.pos){
correct=false
}
})

if(correct){
setTimeout(()=>showPage("page1","page2"),700)
}
}

/* ---------- HUG ---------- */

let f1=false
let f2=false
let unlocked=false

function spawnRose(){
let r=document.createElement("div")
r.className="rose"
r.innerHTML="üåπ"
r.style.left=Math.random()*100+"vw"
document.body.appendChild(r)
setTimeout(()=>r.remove(),6000)
}

function vibrate(){
if(navigator.vibrate) navigator.vibrate([120,80,120])
}

function checkHold(){

if(f1 && f2 && !unlocked){

unlocked=true
document.getElementById("hugImg").style.transform="scale(1.25)"

let beat=setInterval(()=>{
spawnRose()
vibrate()
},900)

setTimeout(()=>{
clearInterval(beat)
showPage("page2","page3")
},4200)
}
}

function press1(){f1=true;document.getElementById("f1").classList.add("glow");checkHold()}
function press2(){f2=true;document.getElementById("f2").classList.add("glow");checkHold()}
function release(){
f1=false
f2=false
document.getElementById("f1").classList.remove("glow")
document.getElementById("f2").classList.remove("glow")
}

["touchstart","mousedown"].forEach(e=>{
document.getElementById("f1").addEventListener(e,press1)
document.getElementById("f2").addEventListener(e,press2)
})

["touchend","mouseup"].forEach(e=>{
document.addEventListener(e,release)
})

</script>
</body>
</html>
